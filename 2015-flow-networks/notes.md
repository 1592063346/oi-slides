## 1. 流量表示变迁

#### 简介

水管模型

#### Ombrophobic Bovines

不拆点会错：S -> 点1 -> 点2 -> 点3 -> T。

拆点的目的：人为给图分层，限制流动“顺序”。

#### PIGS

朴素模型：单位流量代表一头猪。原题中有时间顺序，要如何在网络流中表示？

优化：考虑经过某一客户的增广路。

#### Dining

食物 -> 牛 -> 饮料。

需要对牛拆点限流。仍然考虑增广路。

## 2. 最小割

#### 简介

最大流-最小割定理。

**意识流证明**：

- 割容量的定义：割两侧的点之间所有连边的容量之和。
- 流量的一种定义：残量网络上与S联通但不包含T的任意点集子集的出流量$-$入流量之和。
  - 也即：S部所有点的出流量$-$入流量之和。
- 最大流 >= 最小割
  - 流量达到最大时，图中不存在增广路，也即残量网络中S无法到达T。
  - 此时构成了一个割。S部与T部之间的所有边的容量为割的容量，也是最大流的流量。
- 任意割 >= 最大流
  - 割将网络分为S部和T部。此时不存在增广路，也即流量达到最大。

## 3. 最小权闭合子图

#### 最大获利

准确地说，这一模型是网络流研究中的经典问题。NOI2006首次引入，2007年集训队论文中被讲解，之后被普及。

## 4. 平面图对偶图

#### 简介

欧拉定理：$v-e+f=2$（点-边+面）

#### 海拔

结论证明：

- 对于任意格子，其海拔一定介于其周围四个点的海拔之间，因此0<=h<=1。
- 可以通过调整使得其与周围某个点的海拔相同，且不改变代价。
- 将同样海拔的点合并成一块，并接着改变海拔，最终可以调整为结论中的情况。

#### Don't Break The Nile

需要拆点限流。

不拆点的反例：

```
XX.X.
.....
.X.XX
```

直接考虑网络，它并不是平面图。

最小割等价于“选出一些格子将其阻挡”。考虑如何阻挡两个块之间的流量。

## 5. 费用递增

#### 简介

比如，买东西，买$x$个的开销是$x^2$。

#### 球队收益

要直接考虑每支球队赢了几盘是很难的，因为这之间的约束条件太多。不如考虑每场比赛谁获胜了。

先假设只有赢家有收益，那么直观建模：S -> 比赛 -> 赢家 -> T。重点在于如何给边赋权。

对于单支队伍，确定获胜场次后，败北场次可以算出来。

#### 修车

考虑“静态”问题。

## 6. 流量平衡

#### 简介

应该说，除了S和T之外都是平衡的。

#### DirectionBoard

如果图中所有点入度=出度=1，那么图是若干个环。

拆点表示点的入度和出度，流量表示一条边。

## 7. 差分系统

#### 切糕

联想到最小权闭合子图，用最小割代表选择。

再就是，限制用无穷大表示。

#### FoxAndCity

构造方法：考虑所有d_i=x的点，如果没有向d_i=x-1的点连边，那么随便找一个连上。

#### 移民站选址

固定所有新站，移动其中一个，一定可以调整到与某个旧站重合。

考虑单个新站，可以算出其与每个旧站重合时的代价，用上述模型表示。

考虑两个新站之间的相互影响。…………

## 8. 区间选择



## 带下界的网络流

#### 判断是否满足下界

新建超级源S'、超级汇T'。

- T -> S : infty
- x->y:[l,r]   =>   S'->y:l  x->T':l  x->y:r-l

如果S'的所有出边满流，那么存在可行流。

即，把边拆成下界+(上界-下界)，并强行让下界的边满流。

这时候流量平衡条件会被破坏，那么我们就需要“补”一些流量。对于x->y:[l,r]，此时y会多出l的流量需要流走，而x会有l的流量需要流入。我们就建超级源和超级汇来提供这些流量。

为了让y的流量可以流回x，我们从原来的汇点向源点连边，此时这两个点也满足了流量平衡。

另一个理解方法：如果下界可以被满足，那么原图中存在S->T且经过这条边的增广路，其流量至少为下界。如果加上T->S:infty的边，这就是个环，那么把下界这条边拆掉之后，就成了新图上的增广路。

#### 最小可行流

通常来说，就是T->S的流量。

什么时候不是？在有循环流的情况下。不用在意。

#### 最大可行流

在上述残量网络上从S到T求最大流。

- 任意残量网络均满足下界，且不超过上界。
- T->S的边上走的流量即为了满足下界而产生的流量，在求最大流的过程中这部分被计入最大流。

